sources:
  generate_syslog:
    type:   "demo_logs"
    format: "syslog"
    interval: 5.0

transforms:
  remap_syslog:
    inputs:
      - "generate_syslog"
    type:   "remap"
    source: |
            structured = parse_syslog!(.message)
            . = merge(., structured)

sinks:
  loki_syslog:
    type: loki
    inputs:
      - remap_syslog
    endpoint: http://gigapipe:3100
    labels:
      forwarder: "vector"
      event: "{{ facility }}"
      type: "syslog"
    encoding:
      codec: "json"
